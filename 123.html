<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—Ä–æ–∫–∏ –±—ñ–æ–ª–æ–≥—ñ—ó</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background: url('https://source.unsplash.com/1600x900/?nature,biology') no-repeat center center/cover;
            background-size: cover;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }

        .container {
            background: rgba(0, 0, 0, 0.7);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            width: 80%;
            max-width: 700px;
        }

        .xp-wrapper {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .xp-container {
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.5em;
            font-weight: bold;
            color: rgb(255, 255, 255);
            transition: transform 0.3s ease;
            flex: 1;
            text-align: center;
        }

        .xp-container:hover {
            transform: scale(1.1);
        }

        .button {
            display: inline-block;
            background: linear-gradient(45deg, #28a745, #218838);
            color: white;
            padding: 15px 25px;
            text-decoration: none;
            font-size: 1.3em;
            border-radius: 50px;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .button:hover {
            background: linear-gradient(45deg, #218838, #28a745);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .settings-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
            display: none;
            text-align: center;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .settings-popup input {
            margin: 10px;
        }

        .close-btn {
            background: red;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
        }

        .easter-greeting {
            position: relative;
            font-size: 28px;
            color: #c45b00;
            font-weight: bold;
            background-color: rgba(255, 240, 214, 0.5);
            padding: 20px 40px;
            border: 2px dashed #ffa500;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            max-width: 90%;
            text-align: center;
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 20px;
            color: #c45b00;
            cursor: pointer;
        }

        .close-btn:hover {
            color: #ff0000;
        }

        .account-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            background-color: #4caf50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .account-btn:hover {
            background-color: #388e3c;
        }

        .popup {
            display: none;
            position: absolute;
            top: 60px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 320px;
            z-index: 1000;
            color: #000;
        }

        input[type="text"], input[type="file"], input[type="password"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .popup button {
            width: 100%;
            background-color: #4caf50;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 10px;
        }

        .popup img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 50%;
            margin-bottom: 10px;
        }

        .popup p {
            margin: 5px 0;
        }

        .welcome-banner {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #ffeb3b;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            display: none;
        }

        #chartContainer {
            margin-top: 20px;
            max-width: 100%;
        }

        canvas {
            max-width: 100%;
            height: auto;
        }

        #captchaGame {
            background: url('https://source.unsplash.com/1600x900/?dark,grunge') no-repeat center center/cover;
            border: 2px solid #ff0000;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Press Start 2P', cursive;
            color: #ff0000;
            text-align: center;
            margin-bottom: 10px;
        }

        #captchaGame p {
            font-size: 12px;
            margin-bottom: 10px;
            text-shadow: 2px 2px #000;
        }

        #captchaImages {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        #captchaImages img {
            width: 60px;
            height: 60px;
            cursor: pointer;
            border: 2px solid #000;
            transition: transform 0.2s;
        }

        #captchaImages img:hover {
            transform: scale(1.1);
            border-color: #ff0000;
        }

        .xp-progress-container {
            margin-top: 15px;
            width: 100%;
            text-align: left;
        }

        .xp-progress-bar {
            width: 100%;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            overflow: hidden;
            height: 20px;
        }

        .xp-progress {
            height: 100%;
            background-color: #4caf50;
            transition: width 0.5s ease-in-out;
        }

        .xp-level {
            margin-top: 10px;
            font-size: 1.2em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="welcome-banner" id="welcomeBanner">
        üéâ –í—ñ—Ç–∞—î–º–æ –Ω–∞ BioWorld! –¢–∏ –≥–æ—Ç–æ–≤–∏–π –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –±—ñ–ª—å—à–µ –ø—Ä–æ –±—ñ–æ–ª–æ–≥—ñ—é?
    </div>

    <button class="account-btn" onclick="togglePopup()">üë§ –ê–∫–∞—É–Ω—Ç</button>

    <div class="popup" id="accountPopup">
        <div id="accountForm">
            <input type="text" id="usernameInput" placeholder="–í–∞—à–µ —ñ–º'—è">
            <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å">
            <input type="file" id="avatarInput" accept="image/*">
            <div id="captchaGame">
                <p>üî´ –ö–∞–ø—á–∞ –≤ —Å—Ç–∏–ª—ñ Minecraft: –í–±–∏–π –∑–ª–∏—Ö –º–æ–Ω—Å—Ç—Ä—ñ–≤! (–ù–∞—Ç–∏—Å–Ω–∏ –Ω–∞ –Ω–∏—Ö)</p>
                <div id="captchaImages"></div>
            </div>
            <button onclick="registerAccount()">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
            <div id="g_id_onload"
                 data-client_id="YOUR_GOOGLE_CLIENT_ID"
                 data-callback="handleGoogleSignIn"
                 data-auto_prompt="false">
            </div>
            <div class="g_id_signin" data-type="standard" data-size="large" data-theme="filled_blue" data-text="signin_with" data-shape="rectangular"></div>
        </div>
        <div id="accountInfo" style="display:none;">
            <img id="userAvatar" src="" alt="–ê–≤–∞—Ç–∞—Ä–∫–∞">
            <p>üëã –ü—Ä–∏–≤—ñ—Ç, <span id="displayName"></span>!</p>
            <p id="timeGreeting"></p>
            <p>üìä –í—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å: <span id="visitCount"></span></p>
            <div id="chartContainer">
                <canvas id="loginChart"></canvas>
            </div>
            <div class="xp-progress-container">
                <p>–í–∞—à XP: <span id="xp-points-account">0</span> / 200</p>
                <div class="xp-progress-bar">
                    <div class="xp-progress" id="xp-progress" style="width: 0%;"></div>
                </div>
                <p class="xp-level">–†—ñ–≤–µ–Ω—å: <span id="xp-level">1</span></p>
            </div>
            <button onclick="logout()">–í–∏–π—Ç–∏</button>
            <button onclick="editProfile()">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</button>
            <button onclick="changeAvatar()">–ó–º—ñ–Ω–∏—Ç–∏ –∞–≤–∞—Ç–∞—Ä–∫—É</button>
            <button onclick="claimBonus()">–û—Ç—Ä–∏–º–∞—Ç–∏ –±–æ–Ω—É—Å</button>
        </div>
    </div>

    <div class="container">
        <h1>üìö –£—Ä–æ–∫–∏ –∑ –±—ñ–æ–ª–æ–≥—ñ—ó</h1>
        <p>–î–æ—Å–ª—ñ–¥–∂—É–π —Å–≤—ñ—Ç –ø—Ä–∏—Ä–æ–¥–∏ —Ä–∞–∑–æ–º —ñ–∑ –Ω–∞–º–∏!</p>
        <a href="Lesson/LessIndex.html" class="button">üìñ –ü–µ—Ä–µ–π—Ç–∏ –¥–æ —É—Ä–æ–∫—ñ–≤</a>
        <a href="QUZ.html" class="button">üß™ –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç</a><br>
        <a href="Nots.html" class="button">üóíÔ∏è –ù–æ—Ç–∞—Ç–Ω–∏–∫</a>
        <a href="Forum.html" class="button">üí¨ Forum</a><br>
        <a href="InfoCrator.html" class="button">üè† –ü—Ä–æ –Ω–∞—Å</a>
        <a href="InfoUpdate.html" class="button">–û–Ω–æ–≤–ª–µ–Ω–Ω—è</a>
        <a href="#" class="button" onclick="openSettings()">‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</a>
    </div>

    <div class="xp-wrapper">
        <div class="xp-container" onclick="location.href='prizes.html'">
            –í–∞—à XP: <span id="xp-points">0</span>
            <div class="xp-progress-container">
                <div class="xp-progress-bar">
                    <div class="xp-progress" id="xp-progress-main" style="width: 0%;"></div>
                </div>
                <p class="xp-level">–†—ñ–≤–µ–Ω—å: <span id="xp-level-main">1</span></p>
            </div>
        </div>
        <div class="xp-container" onclick="redirectToRandomTest()">
            üé≤ –í–∏–ø—Ä–æ–±—É–π —Å–µ–±–µ!
        </div>
        <div class="xp-container" onclick="location.href='Test.html'">
            üåø –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞—á –†–æ—Å–ª–∏–Ω
        </div>
    </div>

    <div class="settings-popup" id="settings">
        <h2>‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</gunh2>
        <label>
            <input type="checkbox" id="darkModeToggle"> üåô –¢–µ–º–Ω–∞ —Ç–µ–º–∞
        </label><br>
 Fruit   <label>
            <input type="checkbox" id="animationToggle" checked> ‚ú® –ê–Ω—ñ–º–∞—Ü—ñ—ó
        </label><br>
        <label>
            üñº –í–ª–∞—Å–Ω–∏–π —Ñ–æ–Ω:
            <input type="text" id="bgInput" placeholder="–í—Å—Ç–∞–≤—Ç–µ URL">
        </label><br>
        <button onclick="applySettings()">‚úÖ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
        <div class="close-btn" onclick="closeSettings()">‚ùå –ó–∞–∫—Ä–∏—Ç–∏</div>
    </div>

    <div class="easter-greeting">
        <button class="close-btn" onclick="this.parentElement.style.display='none';">‚úñ</button>
        üå≥üå≥ –ì–∞—Ä–Ω–∏—Ö –∫–∞–Ω—ñ–∫—É–ª üå≥üå≥
    </div>

    <script>
        let xpPoints = parseInt(localStorage.getItem('xpPoints') || 0);
        const maxXP = 200;
        let lastClaimDate = localStorage.getItem('lastClaimDate') || '';
        const today = new Date().toISOString().split('T')[0];

        function updateXPProgress() {
            const progressPercent = (xpPoints / maxXP) * 100;
            document.getElementById('xp-progress').style.width = `${progressPercent}%`;
            document.getElementById('xp-progress-main').style.width = `${progressPercent}%`;
            document.getElementById('xp-points').textContent = xpPoints;
            document.getElementById('xp-points-account').textContent = xpPoints;

            const level = Math.floor(xpPoints / 50) + 1;
            document.getElementById('xp-level').textContent = level;
            document.getElementById('xp-level-main').textContent = level;

            if (xpPoints >= maxXP) {
                xpPoints = 0;
                localStorage.setItem('xpPoints', xpPoints);
                alert('–í—ñ—Ç–∞—î–º–æ! –í–∏ –¥–æ—Å—è–≥–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è! XP —Å–∫–∏–Ω—É—Ç–æ.');
            }
        }

        if (lastClaimDate !== today) {
            xpPoints += 50;
            localStorage.setItem('xpPoints', xpPoints);
            localStorage.setItem('lastClaimDate', today);
            alert('–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ 50 XP –∑–∞ —â–æ–¥–µ–Ω–Ω–∏–π –≤—Ö—ñ–¥!');
        }

        updateXPProgress();

        function claimBonus() {
            if (xpPoints >= 100) {
                xpPoints += 20;
                localStorage.setItem('xpPoints', xpPoints);
                alert('–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –±–æ–Ω—É—Å 20 XP!');
                updateXPProgress();
            } else {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ XP –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –±–æ–Ω—É—Å—É! –ü–æ—Ç—Ä—ñ–±–Ω–æ 100 XP.');
            }
        }

        function redirectToRandomTest() {
            const tests = [
                'Quz/QPetInst.html',
                'Quz/QPetOrg.html',
                'Quz/QPlosCherv.html',
                'Quz/QPetIn.html'
            ];
            const randomTest = tests[Math.floor(Math.random() * tests.length)];
            location.href = randomTest;
            xpPoints += 10;
            localStorage.setItem('xpPoints', xpPoints);
            alert('–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ 10 XP –∑–∞ –≤–∏–±—ñ—Ä –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ —Ç–µ—Å—Ç—É!');
            updateXPProgress();
        }

        function openSettings() {
            document.getElementById('settings').style.display = 'block';
        }

        function closeSettings() {
            document.getElementById('settings').style.display = 'none';
        }

        function applySettings() {
            const darkMode = document.getElementById('darkModeToggle').checked;
            if (darkMode) {
                document.body.style.background = '#121212';
            } else {
                document.body.style.background = "url('https://source.unsplash.com/1600x900/?nature,biology') no-repeat center center/cover";
            }
            localStorage.setItem('darkMode', darkMode);

            const animations = document.getElementById('animationToggle').checked;
            document.body.style.transition = animations ? 'background 0.5s ease-in-out' : 'none';
            localStorage.setItem('animations', animations);

            const customBg = document.getElementById('bgInput').value;
            if (customBg) {
                document.body.style.background = `url('${customBg}') no-repeat center center/cover`;
                localStorage.setItem('customBg', customBg);
            }

            closeSettings();
            xpPoints += 5;
            localStorage.setItem('xpPoints', xpPoints);
            alert('–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ 5 XP –∑–∞ –∑–º—ñ–Ω—É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å!');
            updateXPProgress();
        }

        window.onload = function() {
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.style.background = '#121212';
                document.getElementById('darkModeToggle').checked = true;
            }

            if (localStorage.getItem('animations') === 'false') {
                document.body.style.transition = 'none';
                document.getElementById('animationToggle').checked = false;
            }

            const savedBg = localStorage.getItem('customBg');
            if (savedBg) {
                document.body.style.background = `url('${savedBg}') no-repeat center center/cover`;
                document.getElementById('bgInput').value = savedBg;
            }

            const name = localStorage.getItem('bioUsername');
            const avatarUrl = localStorage.getItem('bioAvatar');
            let visits = localStorage.getItem('bioVisits');

            if (name && avatarUrl) {
                visits = parseInt(visits || 0) + 1;
                localStorage.setItem('bioVisits', visits);
                updateLoginHistory();
                showAccountInfo(name, avatarUrl, visits);
            } else {
                generateCaptcha();
            }

            updateXPProgress();
        };

        function togglePopup() {
            const popup = document.getElementById('accountPopup');
            popup.style.display = popup.style.display === 'block' ? 'none' : 'block';
            if (popup.style.display === 'block' && !localStorage.getItem('bioUsername')) {
                generateCaptcha();
            }
        }

        let evilMonstersClicked = 0;
        const requiredClicks = 3;
        const monsters = [
            { src: 'Assets/verif/evil1.png', isEvil: true },
            { src: 'Assets/verif/evil2.png', isEvil: true },
            { src: 'Assets/verif/evil3.png', isEvil: true },
            { src: 'Assets/verif/good1.png', isEvil: false },
            { src: 'Assets/verif/good2.png', isEvil: false }
        ];

        function generateCaptcha() {
            const captchaImages = document.getElementById('captchaImages');
            captchaImages.innerHTML = '';
            evilMonstersClicked = 0;

            const shuffledMonsters = monsters.sort(() => Math.random() - 0.5);
            shuffledMonsters.slice(0, 5).forEach(monster => {
                const img = document.createElement('img');
                img.src = monster.src;
                img.dataset.isEvil = monster.isEvil;
                img.onclick = () => handleMonsterClick(monster.isEvil);
                captchaImages.appendChild(img);
            });
        }

        function handleMonsterClick(isEvil) {
            if (isEvil) {
                evilMonstersClicked++;
                if (evilMonstersClicked >= requiredClicks) {
                    document.getElementById('captchaGame').innerHTML = '<p style="color: #00ff00;">‚úÖ –£—Å—ñ—Ö –º–æ–Ω—Å—Ç—Ä—ñ–≤ –∑–Ω–∏—â–µ–Ω–æ! –ù–∞—Ç–∏—Å–Ω–∏ "–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è"!</p>';
                    xpPoints += 15;
                    localStorage.setItem('xpPoints', xpPoints);
                    alert('–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ 15 XP –∑–∞ –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è –∫–∞–ø—á—ñ!');
                    updateXPProgress();
                }
            } else {
                alert('–û–π! –¶–µ –¥–æ–±—Ä–∏–π –º–æ–Ω—Å—Ç—Ä! –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑.');
                generateCaptcha();
            }
        }

        function registerAccount() {
            const name = document.getElementById('usernameInput').value.trim();
            const password = document.getElementById('passwordInput').value.trim();
            const avatarFile = document.getElementById('avatarInput').files[0];

            if (evilMonstersClicked < requiredClicks) {
                alert('–ó–Ω–∏—â —É—Å—ñ—Ö –∑–ª–∏—Ö –º–æ–Ω—Å—Ç—Ä—ñ–≤ –¥–ª—è –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è –∫–∞–ø—á—ñ!');
                return;
            }

            if (name && password && avatarFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const avatarUrl = e.target.result;
                    localStorage.setItem('bioUsername', name);
                    localStorage.setItem('bioAvatar', avatarUrl);
                    localStorage.setItem('bioVisits', 1);

                    if ('PasswordCredential' in window) {
                        const credential = new PasswordCredential({
                            id: name,
                            password: password,
                            name: name,
                            iconURL: avatarUrl
                        });
                        navigator.credentials.store(credential)
                            .then(() => {
                                console.log('Credentials saved to Google Password Manager');
                            })
                            .catch(err => {
                                console.error('Error saving credentials:', err);
                            });
                    }

                    updateLoginHistory();
                    showAccountInfo(name, avatarUrl, 1);
                    xpPoints += 20;
                    localStorage.setItem('xpPoints', xpPoints);
                    alert('–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ 20 XP –∑–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é!');
                    updateXPProgress();
                };
                reader.readAsDataURL(avatarFile);
            } else {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å —ñ–º‚Äô—è, –ø–∞—Ä–æ–ª—å —Ç–∞ –≤–∏–±–µ—Ä—ñ—Ç—å –∞–≤–∞—Ç–∞—Ä–∫—É!');
            }
        }

        function handleGoogleSignIn(credentialResponse) {
            const idToken = credentialResponse.credential;
            const base64Url = idToken.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const jsonPayload = decodeURIComponent(atob(base64).split('').map(c => {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));
            const userInfo = JSON.parse(jsonPayload);

            const name = userInfo.name || userInfo.email.split('@')[0];
            const avatarUrl = userInfo.picture || 'https://via.placeholder.com/80';
            localStorage.setItem('bioUsername', name);
            localStorage.setItem('bioAvatar', avatarUrl);
            localStorage.setItem('bioVisits', 1);
            updateLoginHistory();
            showAccountInfo(name, avatarUrl, 1);
            xpPoints += 20;
            localStorage.setItem('xpPoints', xpPoints);
            alert('–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ 20 XP –∑–∞ –≤—Ö—ñ–¥ —á–µ—Ä–µ–∑ Google!');
            updateXPProgress();
        }

        function showAccountInfo(name, avatarUrl, visits) {
            document.getElementById('accountForm').style.display = 'none';
            document.getElementById('accountInfo').style.display = 'block';
            document.getElementById('displayName').textContent = name;
            document.getElementById('userAvatar').src = avatarUrl;
            document.getElementById('visitCount').textContent = visits;
            document.getElementById('welcomeBanner').style.display = 'block';
            setTimeGreeting();
            drawLoginChart();
            updateXPProgress();
        }

        function logout() {
            localStorage.clear();
            google.accounts.id.disableAutoSelect();
            location.reload();
        }

        function editProfile() {
            const name = prompt("–í–≤–µ–¥—ñ—Ç—å –Ω–æ–≤–µ —ñ–º'—è", localStorage.getItem('bioUsername'));
            if (name) {
                localStorage.setItem('bioUsername', name);
                showAccountInfo(name, localStorage.getItem('bioAvatar'), localStorage.getItem('bioVisits'));
                xpPoints += 5;
                localStorage.setItem('xpPoints', xpPoints);
                alert('–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ 5 XP –∑–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é!');
                updateXPProgress();
            }
        }

        function changeAvatar() {
            const avatarInput = document.createElement('input');
            avatarInput.type = 'file';
            avatarInput.accept = 'image/*';
            avatarInput.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const avatarUrl = e.target.result;
                        localStorage.setItem('bioAvatar', avatarUrl);
                        document.getElementById('userAvatar').src = avatarUrl;
                        xpPoints += 5;
                        localStorage.setItem('xpPoints', xpPoints);
                        alert('–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ 5 XP –∑–∞ –∑–º—ñ–Ω—É –∞–≤–∞—Ç–∞—Ä–∫–∏!');
                        updateXPProgress();
                    };
                    reader.readAsDataURL(file);
                }
            };
            avatarInput.click();
        }

        function setTimeGreeting() {
            const hours = new Date().getHours();
            const greeting = hours < 12 ? "–î–æ–±—Ä–∏–π —Ä–∞–Ω–æ–∫!" : (hours < 18 ? "–î–æ–±—Ä–∏–π –¥–µ–Ω—å!" : "–î–æ–±—Ä–∏–π –≤–µ—á—ñ—Ä!");
            document.getElementById('timeGreeting').textContent = greeting;
        }

        function updateLoginHistory() {
            const loginHistory = JSON.parse(localStorage.getItem('loginHistory') || '{}');
            const today = new Date().toISOString().split('T')[0];
            loginHistory[today] = (loginHistory[today] || 0) + 1;
            localStorage.setItem('loginHistory', JSON.stringify(loginHistory));
        }

        function drawLoginChart() {
            const loginHistory = JSON.parse(localStorage.getItem('loginHistory') || '{}');
            const labels = Object.keys(loginHistory).slice(-7);
            const data = labels.map(date => loginHistory[date] || 0);

            const ctx = document.getElementById('loginChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '–í—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—è –∑–∞ –¥–µ–Ω—å',
                        data: data,
                        backgroundColor: 'rgba(75, 192, 192, 0.5)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—Ö–æ–¥—ñ–≤'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '–î–∞—Ç–∞'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }
    </script>
    <script defer data-domain="bropetro.github.io/bioword.github.io" src="https://plausible.io/js/script.outbound-links.js"></script>
</body>
</html>